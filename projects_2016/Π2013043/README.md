#Δημιουργία API σε node.js που επιστρέφει στοιχεία μιας βάσης SQL
Μωραΐτης Γεώργιος
Π2013043

##Τελική αναφορά

Τίτλος : __MySQLApi.js__


###Σύνοψη : 
Η εργασία έχει ως στόχο την δημιουργία ενός API που επιστρέφει τα περιεχόμενα μιας βάσης δεδομένων MySQL σε μορφή JSON
και επιτρέπει την επεξεργασία πελατών και παραγγελιών της sample βάσης δεδομένων classicModels http://www.mysqltutorial.org/mysql-sample-database/ 

###Εισαγωγή :

Ο χρήστης μπορεί μέσω του Browser να χρησιμοποιήσει την μπάρα διευθύνσεων ,καθώς και τις φόρμες HTML που παρέχονται για να εμφανίσει ,να τροποποιήσει η να αλλάξει στοιχεία της βάσης δεδομένων.

###Επιλογή εργαλείων :

Το API σχεδιάστηκε σε javascript, τρέχει σe Node.js και επικοινωνεί με MySQL.Η βάση δεδομένων δημιουργήθηκε μέσω του sample script.Τα επιπλέον Node modules που χρειάστηκαν πέραν των βασικών είναι το express,το node-MySQL για τα queries,και το body-parser για την ανάλυση των post request.

###Διαδικασία ανάπτυξης:

- Μελέτη τρόπου λειτουργίας Node.js,των απαραίτητων βιβλιοθηκών, και ασύγχρονου κώδικα.
- Εγκατάσταση βασικών εργαλείων.
- Έλεγχος επικοινωνίας μεταξύ της βάσης και του Node
- Ανάπτυξη βασικού structure των ερωτημάτων
- Παραμετροποίηση ερωτημάτων GET
- Ενσωμάτωση ερωτημάτων POST μέσω HTML
- Ενσωμάτωση ερωτημάτων PUT και DELETE μέσω POST tunneling
- Απλοποίηση δυναμικής δημιουργίας των ερωτημάτων απο το input χρήστη
- Προσθήκη error checking στις φόρμες 
- Έλεγχος εισαγωγής προβληματικών τιμών,NULL κτλ (ο έλεγχος λογικών error γίνεται απο την MySQL) 
- Δημιουργία του index


###Τρόπος λειτουργίας

- __Setup:__

Για να χρησιμοποιήσουμε το API πρέπει να κάνουμε εκτέλεση του sql script που παρέχεται στο sample ώστε να έχουμε την βάση στην οποία θα δουλέψει.

Εαν χρησιμοποιούμε MySQL(MariaDB) μέσω XAMPP αφήνουμε τις ρυθμίσεις ως έχουν εκτός εαν έχει αλλαχθεί το root password.Για MySQL community server αλλάζουμε το port σε 8081,καθώς και το password.

Ύστερα εγκαθιστούμε το Node.js ώστε να τρέχει το script,και με την εντολη >node (filepath του MySQLApi.js) δημιουργείται ο server

- __Χρήση:__

Το default port του API είναι το 8082,που σημαίνει οτι για να βρεθούμε στην αρχική σελίδα πηγαίνουμε στην διεύθυνση http://localhost:8082/ .

Εκέι βρίσκεται το index όπου μπορούμε να δούμε σε τι ενέργεια αντιστοιχούν οι διευθύνσεις.Εκεί παρέχονται επίσης και shortcuts για την τροποποίση η προσθήκη πελατών κ.τ.λ ,που μπορεί να γίνει και μέσω του url (π.χ http//localhost:8082/addCustomer).

Οι μεθόδοι post,put και delete πραγματοποιούνται μονο μέσω των παρεχόμενων φορμών

-__Παραδειγμα χρήσης__

Μέσω του Add Customer shortcut η του /addCustomer url προσθέτουμε ένα νέο record.Αφού η φόρμα ελέγξει ότι οι τιμές έχουν επιτρεπτές τιμές ,πραγματοποιείται το κατάλληλο query,και επιστρέφεται μήνυμα επιτυχίας,η mysql error μήνυμα σε περίπτωση λογικού λάθους.

Ύστερα μπορούμε μέσω του phpmyadmin να δούμε τον πελάτη που προστέθηκε ,η να επιστρέψουμε τα στοιχεία του σε μορφή JSON μεσω του URI http://localhost:8082/customers/customerNumber="(αριθμός)".Στην θέση του customer number μπορούμε να βάλουμε οποιαδήποτε άλλη ιδιότητα θέλουμε.

Εάν θέλουμε να διαγράψουμε η να επεξεργαστούμε τον πελάτη,η να προσθέσουμε μια παραγγελία του αρκεί να δώσουμε τον αριθμό του στις αντίστοιχες φόρμες


Σχετικές Εργασίες:Το API δεν είναι τροποποίηση υπάρχοντος εργασίας και δεν περιέχει έτοιμο κώδικα πέρα της σύνταξης (πχ του mysql.Createconnection)




















...
