#Τίτλος Εργασίας
Σίνγκ Αλέξανδρος Π2013101
Χρήστος Παπασαραφιανός Π2013129

##Παραδοτέο 1

RESTful API for SQl databases in node.js

##Tελική Αναφορά

##A RESTful API for mySQL databases in node.js

#Σύνοψη
 Στα πλαίσια της εργασίας αναπτύχθηκε σε node.js API σύμφωνα με τo προγραμματιστικό style REST,
με σκοπό την διαχείρηση SQL βάσης δεδομένων.


##Εισαγωγή

 Το REST είναι ενας οδηγός/style προγραμματιστικής αρχιτεκτονικής που περιγράφει την ανάπτυξη
 προγραμμάτων μεσα στο πλαίσιο των hypermedia/web pages, στα οποία θέτει κυρίος τα εξής constraints:

* Σχέσεις πελάτη-διακομιστή: Πρέπει να υπάρχει ομοιόμορφο interface το οποίο να διαχωρίζει τους πελάτες και τους διακομιστές - Seperation of concerns. Συνήθως η επικοινωνία γίνεται μέσω HTTP verbs (GET,PUT etc).

* Statelessness: H επικοινωνία πελάτη-διακομιστή δεν πρέπει να περιέχει την δημιουργεία κατάστασης σχετικής με τον πελάτη απο τον διακομιστή.
Αυτό σημαίνει οτι κάθε interaction πελάτη-διακομιστή πρέπει να περιέχει ολα τα απαραίτητα στοιχεία για την εξυπηρέτηση του πελάτη.

* Διαφοροποίηση πόρων και των αναπαραστάσεων/απεικονίσεων τους: Τα resources του διακομίστη πρέπει να διαφοροποιούνται απο τις απεικονίσεις που στέλνει στον πελάτη. Για παράδειγμα στην εργασία μας, η database (πόρος) είναι σε μορφή βάσης SQL, ενώ στον πελάτη φτάνουν json δεδομένα (αναπαράσταση).

##Eπιλογή εργαλείων

Η βάση δεδομένων αναπτύχθηκε σε mySQL, χρησιμοποιόντας την παραδειγματική βάση της εκφώνησης, με κάποιες αλλαγές - κυρίως μείωση των γνωρισμάτων και των extra tables, ωστε να είναι ευκολότερο το debugging. Το RESTful design του συστήματος, του επιτρέπει να μπορεί trivially να αντιμετωπίσει οποιαδήποτε επέκταση της βάσης δεδομένων.

Ο server αναπτύχθηκε σε node.js κάνοντας χρήση των πακέτων express.js (γενικό framework ανάπτυξης API), body-parser(parsing των requests), mysql(διεπαφή με την local βάση δεδομένων).

##Διαδικασία ανάπτυξης

Η ανάπτυξη ξεκίνησε με την κατασκευή της βάσης δεδομένων βάση του παραδείγματος, με κάποιες απλοποιήσεις για διευκόλυνση του debugging:
Κρατήσαμε μόνο τα 2 tables που χρησιμοποιούνται, τα customers και orders, απο τα οποία κρατήσαμε μόνο τα βασικά χαρακτηριστικά: customerId, customerName για τον πίνακα customers και orderId, customerId, date για τον πίνακα orders αντίστοιχα. Φυσικά το σύστημα λειτουργεί και με την full βάση του παραδείγματος, αλλα βεβαίως τα δεδομένα που θα γυρνάει ο server είναι αρκετά περισσότερα, πράγμα που δυσκόλευε το debugging μας.

Ο server αποτελείται απο 2 components. To ενα (αρχείο server.js) αφορά το establishment του server, τις συνδέσεις με την βάση δεδομένων και τα configurations των πακέτων express και body-parser.
To δεύτερο κομμάτι (REST.js) είναι το σώμα του API, και περιέχει τις μεθόδους που κάνουν handle το κάθε request: GET, PUT, POST, DELETE.

Το GET μπορεί να γυρίσει 3 διαφορετικά representations ανάλογα με τα requests του πελάτη: όλους τους πελάτες, συγκεκριμένο πελάτη και 
πελάτη μαζί με τις παραγγελίες του (μεσω inner join με κλειδί το customerId).

To DELETE διαγράφει τον customer με customerId ίσο με το ID που έδωσε ο client.

To PUT προσθέτει customer με customerId ίσο με το ID που έδωσε ο client.

Το POST κάνει update την τιμή customerName με το value που πέρασε ο πελάτης, για τον customer με το ID που έδωσε ο client.

Οι POST και PUT μπορούνε trivially να επεκταθούν για να διαχειρίζονται την full βάση. Αρκεί απλά να διαβάζουμε και τα extra arguments που θα μας 
δώσει ο πελάτης (πχ phone), ακριβώς όπως κάνουμε για τα ID και name, δηλαδή απλά βάζουμε στο query formatter μας πχ req.query.phone .

##Διάγραμμα λειτουργείας

Όπως αναφέραμε, το RESTful design αποφεύγει την χρήση state, προτιμώντας ομοιόμορφη και πλήρης επικοινωνία server-client. Είναι φυσικό λοιπόν 
το διάγραμμα λειτουργείας μας να είναι trivial:

![Alt text](transitions.png?raw=true "Διάγραμμα Λειτουργείας")



##Ενδεικτικά requests

![Alt text](ergasiaSW.jpg?raw=true "Ενδεικτικά requests")


## Συμπεράσματα

Η RESTful ανάπτυξη είναι ευχάριστα εύκολη και απλή, η έλληψη state βοηθάει στον απλό σχεδιασμό και ειδικά στο debugging μιας και δεν χρείαζεται
να λαμβάνουμε υπόψην πιθανές καταστάσεις στις οποίες βρίσκεται το κάθε κομμάτι του συστήματος. Η αναπαράσταση με json βοηθάει στην επίτευξη
ομοιομορφίας και ευκολίας επεξεργασίας των δεδομένων, μιας και η javascript είναι εφοδιασμένη με πολλά πακέτα που κάνουν την επεξεργασία json δεδομένων πολυ εύκολη. Το API είναι εύχριστο και κρύβει τις περιπλοκότητες των SQL queries, επιτρέποντας στους διάφορους clients-servers να επικοινωνούν σε υψηλό επίπεδο, αγνοώντας τα εσωτερικά implementations της κάθε υπηρεσίας. 



